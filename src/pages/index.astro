---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import ProjectGrid from "../components/ProjectGrid.astro";
import ProjectGridHeader from "../components/ProjectGridHeader.astro";
import Preloader from "../components/Preloader.astro";

const allProjects = await getCollection("projects");
const projects = allProjects
  .filter((p) => p.data.category === 'B' && p.data.online)
  .sort((a, b) => (a.data.order_projects ?? 0) - (b.data.order_projects ?? 0));
const projectsTotal = projects.length;
const title = "Jannis Reinelt";
---

<BaseLayout title={title}>
  <!-- 
    The <Preloader /> component is used to preload all images on the homepage using the images.loaded.js script. 
    If you don’t want to use the preloader (e.g., for faster page load times or if you don’t require preloading images), you can safely remove the <Preloader /> component from this layout.
  
  <Preloader /> -->
 <!--  <ProjectGridHeader projectsTotal={projectsTotal} />   --->
  <ProjectGrid projects={projects} />
</BaseLayout>
<!--  <script src="../scripts/index.js"></script> -->
<script>
  
  import initVideo from "../scripts/initVideo.js";
  initVideo();
</script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
